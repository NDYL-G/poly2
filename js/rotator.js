(function(){const s=document.getElementById('status'),i=document.getElementById('idx'),l=document.getElementById('len'),src=document.getElementById('src'),f=document.getElementById('stage');const LS='vvx_playlist_v1';async function j(u){const r=await fetch(u,{cache:'no-store'});if(!r.ok)throw new Error('HTTP '+r.status);return r.json()}async function load(){try{const raw=localStorage.getItem(LS);if(raw)return JSON.parse(raw)}catch{}const d=await j('data/playlist.json');try{localStorage.setItem(LS,JSON.stringify(d))}catch{}return d}(async()=>{s.textContent='Loading playlistâ€¦';const pl=await load();if(!Array.isArray(pl)||!pl.length){s.textContent='Empty playlist';return}l.textContent=String(pl.length);let k=0;const dwell=10000;function nxt(){const it=pl[k%pl.length];k++;i.textContent=String(((k-1)%pl.length)+1);const url=it.url||it;src.textContent=url;s.textContent='';try{f.src=url}catch(e){location.href=url;return}setTimeout(nxt,dwell)}nxt()})().catch(e=>s.textContent='Error: '+(e.message||e))})();