function hourSlot(){return Math.floor(Date.now()/3600000)}function pick(l){return Array.isArray(l)&&l.length?l[hourSlot()%l.length]:null}(async()=>{try{const d=await (await fetch('../data/onthisday.json',{cache:'no-store'})).json();const E=document.getElementById('events'),B=document.getElementById('births'),D=document.getElementById('deaths');function one(x,el){if(!el)return;if(!x){el.innerHTML='<li>—</li>';return}const y=(x.year||'');const t=(x.text||x.event||x.title||'');el.innerHTML=`<li>${y?('<strong>'+y+'</strong> — '):''}${t}</li>`}one(pick(d.events),E);one(pick(d.births),B);one(pick(d.deaths),D)}catch{document.getElementById('events').innerHTML='<li>—</li>'}const now=new Date();document.getElementById('updated').textContent='Updated: '+now.toLocaleTimeString([], {hour:'2-digit',minute:'2-digit'})})();