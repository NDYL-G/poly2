const FEEDS=[{key:'breaking',label:'Breaking',data:'../data/news-breaking.json'},{key:'world',label:'World',data:'../data/news-world.json'},{key:'uk',label:'UK',data:'../data/news-uk.json'},{key:'cornwall',label:'Cornwall',data:'../data/news-cornwall.json'}];const tabs=document.getElementById('tabs'),feed=document.getElementById('feed');let current='breaking';function tabsBuild(){tabs.innerHTML='';FEEDS.forEach(f=>{const b=document.createElement('button');b.className='tab'+(f.key===current?' active':'');b.textContent=f.label;b.onclick=()=>{current=f.key;document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));b.classList.add('active');load()};tabs.appendChild(b)})}async function j(u){const r=await fetch(u,{cache:'no-store'});if(!r.ok)throw new Error('HTTP '+r.status);return r.json()}async function load(){try{const items=await j(FEEDS.find(x=>x.key===current).data);feed.innerHTML=(items||[]).slice(0,20).map(it=>`<li><a class="link" href="${it.link}" target="_blank" rel="noopener">${it.title}</a><div class="muted">${it.source||'BBC'} Â· ${it.pubDate||''}</div></li>`).join('')}catch{feed.innerHTML='<li>Snapshot not found</li>'}const now=new Date();document.getElementById('updated').textContent='Updated: '+now.toLocaleTimeString([], {hour:'2-digit',minute:'2-digit'})}tabsBuild();load();